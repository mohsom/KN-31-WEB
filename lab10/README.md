# Лабораторна робота 10 - Повноцінний To-Do застосунок

## Мета роботи

Об'єднати всі знання з попередніх лабораторних робіт в одному функціональному застосунку з повним циклом розробки: фронтенд + бекенд + база даних (JSON).

## Опис програми

Повноцінний To-Do застосунок з наступними можливостями:

- **Аутентифікація:**
  - Реєстрація користувачів
  - Вхід у систему
  - Вихід з системи
  - Захищені маршрути

- **Управління завданнями (CRUD):**
  - Створення завдань
  - Перегляд завдань
  - Редагування завдань
  - Видалення завдань
  - Позначення як виконаних/невиконаних

- **Додаткові функції:**
  - Пріоритет завдань (низька/середня/висока)
  - Фільтрація завдань (Всі/Невиконані/Виконані)
  - Статистика через Chart.js (кругова діаграма)

- **Безпека:**
  - Хешування паролів через bcrypt
  - Сесії для збереження стану
  - Валідація через express-validator
  - Захист API маршрутів

## Структура проєкту

```
lab10/
├── server.js              # Основний файл сервера
├── package.json           # Залежності та конфігурація
├── data/
│   ├── users.json        # Користувачі
│   └── tasks.json        # Завдання
├── utils/
│   └── db.js             # Функції для роботи з JSON
├── public/
│   ├── index.html        # Головна сторінка
│   ├── register.html     # Реєстрація
│   ├── login.html        # Вхід
│   ├── dashboard.html    # Панель управління
│   ├── css/
│   │   └── style.css    # Стилі
│   └── js/
│       └── app.js        # JavaScript для роботи з API
└── README.md             # Документація
```

## Встановлення та запуск

### Вимоги

- Node.js (версія 12 або вище)
- npm

### Кроки встановлення

```bash
# Перейти в папку lab10
cd lab10

# Встановити залежності
npm install

# Запустити сервер
npm start
```

Після запуску сервер буде доступний за адресою: `http://localhost:3000`

## API Документація

### POST /api/register

Реєстрація нового користувача.

**Тіло запиту:**
```json
{
  "fullName": "Володимир Скальський",
  "email": "user@example.com",
  "password": "password123"
}
```

**Відповідь:**
```json
{
  "success": true,
  "message": "Реєстрація успішна!",
  "user": {
    "id": 1,
    "fullName": "Володимир Скальський",
    "email": "user@example.com"
  }
}
```

### POST /api/login

Вхід у систему.

**Тіло запиту:**
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**Відповідь:**
```json
{
  "success": true,
  "message": "Вітаємо! Ви успішно увійшли в систему.",
  "user": {
    "id": 1,
    "fullName": "Володимир Скальський",
    "email": "user@example.com"
  }
}
```

### GET /api/logout

Вихід з системи.

### GET /api/me

Отримати інформацію про поточного користувача (потрібна авторизація).

### GET /api/tasks

Отримати всі завдання поточного користувача (потрібна авторизація).

**Відповідь:**
```json
[
  {
    "id": 1,
    "userId": 1,
    "title": "Вивчити Express",
    "completed": false,
    "priority": "висока",
    "createdAt": "2025-11-20T10:00:00.000Z"
  }
]
```

### POST /api/tasks

Створити нове завдання (потрібна авторизація).

**Тіло запиту:**
```json
{
  "title": "Нове завдання",
  "priority": "середня"
}
```

### PUT /api/tasks/:id

Оновити завдання (потрібна авторизація, тільки власник).

**Тіло запиту:**
```json
{
  "title": "Оновлена назва",
  "completed": true,
  "priority": "висока"
}
```

### DELETE /api/tasks/:id

Видалити завдання (потрібна авторизація, тільки власник).

## Особливості реалізації

- **Хешування паролів:** bcrypt з salt rounds = 12
- **Сесії:** express-session для збереження стану авторизації
- **Валідація:** express-validator для перевірки даних
- **Захист маршрутів:** middleware isAuthenticated
- **Візуалізація:** Chart.js для відображення статистики
- **Фільтрація:** клієнтська фільтрація завдань
- **Безпека:** перевірка власності завдань перед операціями

## Функціонал

1. **Реєстрація/Вхід:**
   - Валідація email та пароля
   - Унікальність email
   - Хешування паролів

2. **Dashboard:**
   - Відображення привітання з ПІБ користувача
   - Список завдань з можливістю редагування
   - Додавання нових завдань
   - Фільтрація завдань
   - Статистика через Chart.js

3. **Завдання:**
   - Створення з пріоритетом
   - Редагування назви та пріоритету
   - Позначення як виконаних/невиконаних
   - Видалення

## Автор

Скальський Володимир

